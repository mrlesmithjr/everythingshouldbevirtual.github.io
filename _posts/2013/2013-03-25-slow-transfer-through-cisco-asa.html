---
layout: post
title: Slow Transfer Through Cisco ASA
date: 2013-03-25 14:33:29.000000000 -04:00
type: post
published: true
status: publish
categories:
- Cisco
- Firewall
- Microsoft
- Server 2008 R2
tags:
- cisco asa
- slow transfer
- windows 2008 r2
meta:
  _yoast_wpseo_linkdex: '56'
  _edit_last: '11'
  _s2mail: 'yes'
  _yoast_wpseo_focuskw: Slow Transfer Cisco ASA
  _wpas_done_all: '1'
  snapEdIT: '1'
  snap_isAutoPosted: '1'
  snapFB: s:300:"a:1:{i:0;a:8:{s:4:"doFB";s:1:"1";s:8:"PostType";s:1:"A";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:51:"New
    post (%TITLE%) has been published on %SITENAME%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:31:"389547404477041_397195280378920";s:5:"pDate";s:19:"2013-03-25
    18:33:31";}}";
  snapLI: s:393:"a:1:{i:0;a:8:{s:4:"doLI";s:1:"1";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"SNAPformatT";s:6:"&nbsp;";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:124:"http://www.linkedin.com/updates?discuss=&amp;scope=138895851&amp;stype=M&amp;topic=5722022242200596480&amp;type=U&amp;a=PXC8";s:5:"pDate";s:19:"2013-03-25
    18:33:32";}}";
  snapSU: s:213:"a:1:{i:0;a:7:{s:4:"doSU";s:1:"1";s:7:"apSUCat";s:2:"IT";s:10:"SNAPformat";s:16:"%TITLE%
    - %TEXT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:6:"28u4mb";s:5:"pDate";s:19:"2013-03-25
    18:33:39";}}";
  snapTW: 's:268:"a:1:{i:0;a:7:{s:4:"doTW";s:1:"1";s:10:"SNAPformat";s:58:"%TITLE%
    - %URL% #everythingshouldbevirtual #windows #cisco";s:8:"attchImg";s:1:"0";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"316256583015350272";s:5:"pDate";s:19:"2013-03-25
    18:33:40";}}";'
  _wp_rp_related_posts_query_result_cache_expiration: '1509520306'
  _wp_rp_related_posts_query_result_cache_6: a:12:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:4:"3793";s:5:"score";s:17:"82.20388328042847";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:3:"680";s:5:"score";s:18:"54.583818677890775";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:4:"1879";s:5:"score";s:17:"53.58583634629565";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:3:"678";s:5:"score";s:18:"51.365427056964386";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:4:"1847";s:5:"score";s:18:"31.866809237027233";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"1566";s:5:"score";s:17:"29.81992462914229";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:4:"1695";s:5:"score";s:18:"29.126795152421447";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:4:"1009";s:5:"score";s:18:"28.704868886705473";}i:8;O:8:"stdClass":2:{s:7:"post_id";s:3:"620";s:5:"score";s:18:"28.704868886705473";}i:9;O:8:"stdClass":2:{s:7:"post_id";s:4:"1773";s:5:"score";s:17:"28.43122136291625";}i:10;O:8:"stdClass":2:{s:7:"post_id";s:4:"1402";s:5:"score";s:18:"27.352188762328733";}i:11;O:8:"stdClass":2:{s:7:"post_id";s:3:"633";s:5:"score";s:18:"27.352188762328733";}}
  _wp_rp_image: empty
  dsq_thread_id: ''
author:
  login: larry.e.smith.jr
  email: larry.e.smith.jr@gmail.com
  display_name: mrlesmithjr
  first_name: Larry
  last_name: Smith
---
<p>I recently ran into this issue in which transferring files through a Cisco ASA Firewall was extremely slow only in one direction. The transfer would run between 10-15 MB/s one way and between 100-500 KB/s the other way. The servers were both Windows 2008 R2 in which this issue would occur. I could transfer files from the server inside the DMZ to a Windows 2003 server without experiencing the same issue. I was able to duplicate this scenario for any other given Windows 2008 R2 to Windows 2008 R2 server doing the same testing. So obviously the issue was Windows 2008 R2 specific in this case. So after some investigation and testing I was able to come up with the following TCP setting changes that corrected the issue and the transfers were the same either way after the reboot which was 10-15 MB/s either way. In my scenario I only needed to make the change on the server inside the DMZ. I also did this same test using a PFSense firewall with the exact same firewall rules in place and this issue was not present.</p>
<p>These are the issues you may experience.</p>
<p>•Poor performance<br />
•Packet loss<br />
•Network latency<br />
•Slow data transfer</p>
<p>Changes made to server inside DMZ.</p>
<pre>netsh int tcp set global RSS=Disable
netsh int tcp set global chimney=Disabled
netsh int tcp set global autotuninglevel=Disabled
netsh int tcp set global congestionprovider=None
netsh int tcp set global ecncapability=Disabled
netsh int ip set global taskoffload=disabled
netsh int tcp set global timestamps=Disabled</pre>
<p>&nbsp;</p>
<p>To revert changes back to default.</p>
<pre>netsh int tcp set global RSS=Enabled
netsh int tcp set global chimney=Enabled
netsh int tcp set global autotuninglevel=normal
netsh int tcp set global congestionprovider=ctcp
netsh int tcp set global ecncapability=Enabled
netsh int ip set global taskoffload=Enabled
netsh int tcp set global timestamps=Enabled</pre>
