---
layout: post
title: Virtualized Internet Firewall With HA and DRS
date: 2013-02-28 11:54:05.000000000 -05:00
type: post
published: true
status: publish
categories:
- Firewall
- Networking
- Security
- Virtualization
- VMware
tags:
- cable
- dsl
- esxi
- Firewall
- virtualized
- vlan
- VMware
- Vsphere
meta:
  _yoast_wpseo_linkdex: '61'
  _edit_last: '11'
  _s2mail: 'yes'
  _yoast_wpseo_focuskw: Virtualized Internet Firewall
  snapEdIT: '1'
  snapFB: s:147:"a:1:{i:0;a:4:{s:4:"doFB";i:0;s:8:"PostType";s:1:"A";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";}}";
  snapLI: s:361:"a:1:{i:0;a:7:{s:4:"doLI";s:1:"1";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:124:"http://www.linkedin.com/updates?discuss=&amp;scope=138895851&amp;stype=M&amp;topic=5712937541439614976&amp;type=U&amp;a=-_o6";s:5:"pDate";s:19:"2013-02-28
    16:54:11";}}";
  snapSU: s:213:"a:1:{i:0;a:7:{s:4:"doSU";s:1:"1";s:7:"apSUCat";s:2:"IT";s:10:"SNAPformat";s:16:"%TITLE%
    - %TEXT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:6:"ApbTvp";s:5:"pDate";s:19:"2013-02-28
    16:54:20";}}";
  _wpas_done_all: '1'
  snapTW: 's:286:"a:1:{i:0;a:7:{s:4:"doTW";s:1:"1";s:10:"SNAPformat";s:76:"%TITLE%
    - %URL% #vmware #vsphere #pfsense #astaro #everythingshouldbevirtual";s:8:"attchImg";s:1:"0";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"307171895122481152";s:5:"pDate";s:19:"2013-02-28
    16:54:22";}}";'
  snap_isAutoPosted: '1'
  _wp_rp_related_posts_query_result_cache_expiration: '1509837022'
  _wp_rp_related_posts_query_result_cache_6: a:12:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:3:"729";s:5:"score";s:17:"99.40842678197205";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:4:"1695";s:5:"score";s:17:"92.36067049032714";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:3:"623";s:5:"score";s:15:"76.198816892724";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:3:"522";s:5:"score";s:15:"76.198816892724";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:3:"668";s:5:"score";s:17:"74.75195592377816";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"1662";s:5:"score";s:17:"68.91385305964324";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:4:"5485";s:5:"score";s:17:"67.87454167624948";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:3:"503";s:5:"score";s:17:"67.31089691288173";}i:8;O:8:"stdClass":2:{s:7:"post_id";s:3:"747";s:5:"score";s:17:"66.52332629397769";}i:9;O:8:"stdClass":2:{s:7:"post_id";s:4:"1494";s:5:"score";s:17:"65.47807319613233";}i:10;O:8:"stdClass":2:{s:7:"post_id";s:3:"139";s:5:"score";s:17:"65.28745749293228";}i:11;O:8:"stdClass":2:{s:7:"post_id";s:3:"497";s:5:"score";s:17:"63.84169480202759";}}
  _wp_rp_image: empty
  dsq_thread_id: '3353650329'
author:
  login: larry.e.smith.jr
  email: larry.e.smith.jr@gmail.com
  display_name: mrlesmithjr
  first_name: Larry
  last_name: Smith
---
<p>I wanted to throw this together real quick and explain how to accomplish running a virtualized firewall (PFSense, Astaro, etc.). The goal to accomplish here is to use your cable/dsl internet connection with the ability to vmotion across VMware hosts and not lose your internet connectivity. :) So the first thing you will need to have on hand is a switch that you can configure VLANs on. You will need to either create a VLAN in which your hosts will have dedicated nics connected into or create port trunks that contain that VLAN as well as any other VLAN you use in your environment. Then create your vm network on top of either your vSwitches or dvSwitches with the VLAN ID you created for this scenario. This vm network connection is what you will use for your WAN side connection for your virtualized firewall. Then all that is left is to connect your LAN side port of your cable/dsl modem into a port on your switch which is also set to the VLAN ID you created. Now your firewall can vmotion across hosts and it will broadcast out over the VLAN and establish your internet connection. This setup works great and I have been doing this for years so now you can too enjoy it. :)</p>
<p>Enjoy!</p>
<p>Leave any comments, suggestions or your other creative ways of doing this as well.</p>
