---
layout: post
title: Supermicro AOC-USAS2-L8i IT mode
date: 2013-03-18 21:12:49.000000000 -04:00
type: post
published: true
status: publish
categories:
- Nexenta
- Storage
tags:
- aoc-usas2-l8i
- it mode
- uefi
meta:
  _edit_last: '11'
  _s2mail: 'yes'
  snapEdIT: '1'
  _wpas_done_all: '1'
  snap_isAutoPosted: '1'
  snapFB: s:290:"a:1:{i:0;a:8:{s:4:"doFB";s:1:"1";s:8:"PostType";s:1:"A";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:31:"389547404477041_394328350665613";s:5:"pDate";s:19:"2013-03-19
    01:12:51";}}";
  snapLI: s:393:"a:1:{i:0;a:8:{s:4:"doLI";s:1:"1";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"SNAPformatT";s:6:"&nbsp;";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:124:"http://www.linkedin.com/updates?discuss=&amp;scope=138895851&amp;stype=M&amp;topic=5719586022543601664&amp;type=U&amp;a=F_X1";s:5:"pDate";s:19:"2013-03-19
    01:12:52";}}";
  snapSU: s:213:"a:1:{i:0;a:7:{s:4:"doSU";s:1:"1";s:7:"apSUCat";s:2:"IT";s:10:"SNAPformat";s:16:"%TITLE%
    - %TEXT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:6:"1YKmMy";s:5:"pDate";s:19:"2013-03-19
    01:13:00";}}";
  snapTW: 's:252:"a:1:{i:0;a:7:{s:4:"doTW";s:1:"1";s:10:"SNAPformat";s:42:"%TITLE%
    - %URL% #everythingshouldbevirtual";s:8:"attchImg";s:1:"0";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"313820367036760064";s:5:"pDate";s:19:"2013-03-19
    01:13:00";}}";'
  _wp_rp_related_posts_query_result_cache_expiration: '1509646679'
  _wp_rp_related_posts_query_result_cache_6: a:12:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:4:"1908";s:5:"score";s:18:"45.594376711412124";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:4:"1637";s:5:"score";s:18:"36.331401722814185";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:4:"3765";s:5:"score";s:18:"30.087349725064108";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:4:"1413";s:5:"score";s:18:"30.001100871816085";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:4:"1433";s:5:"score";s:18:"29.328156398573654";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"1777";s:5:"score";s:17:"28.82552754199886";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:4:"1399";s:5:"score";s:17:"28.82552754199886";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:3:"315";s:5:"score";s:18:"28.090077981735234";}i:8;O:8:"stdClass":2:{s:7:"post_id";s:4:"2233";s:5:"score";s:17:"27.80387629444739";}i:9;O:8:"stdClass":2:{s:7:"post_id";s:4:"1196";s:5:"score";s:18:"26.863869035936446";}i:10;O:8:"stdClass":2:{s:7:"post_id";s:4:"2316";s:5:"score";s:18:"23.971385498118657";}i:11;O:8:"stdClass":2:{s:7:"post_id";s:4:"1556";s:5:"score";s:17:"22.66473238887453";}}
  _wp_rp_image: '3745'
  dsq_thread_id: ''
author:
  login: larry.e.smith.jr
  email: larry.e.smith.jr@gmail.com
  display_name: mrlesmithjr
  first_name: Larry
  last_name: Smith
---
<p>In order to get this SAS controller to work with Nexenta/ZFS you first need to flash the firmware to enable IT mode. This allows the disks to be presented as JBOD's which is what we need for ZFS. The following is what you will need to do in order to accomplish this.</p>
<p>Create bootable USB thumb drive using the steps <a title="http://www.sevenforums.com/tutorials/46707-ms-dos-bootable-flash-drive-create.html" href="http://www.sevenforums.com/tutorials/46707-ms-dos-bootable-flash-drive-create.html" target="_blank">here</a>.</p>
<p>Download the firmware from SuperMicro <a title="ftp://ftp.supermicro.com/driver/SAS/LSI/2008/IR_IT/Firmware/IT/" href="ftp://ftp.supermicro.com/driver/SAS/LSI/2008/IR_IT/Firmware/IT/" target="_blank">here</a> and save it to your USB thumb drive. I like to grab each firmware that is available at the time of doing this and put them in their respective folders on the drive. Then I can roll back to an older version in case of an issue and not have to go download them again. Now you will need to set the jumper on the card to enable IT mode and then reboot the system with the SAS controller in it and then run smc2008.bat from within the folder of the firmware you wish to flash it to.</p>
<p>So in my attempt to flash the controller with my new motherboard following the process above ended in failure. I received the message "ERROR: Failed to initialize PAL. Exiting program ". What? :) So after some google searching I finally found that this is because of the UEFI BIOS. You can read more on this from <a title="http://www.supermicro.com/support/faqs/faq.cfm?faq=12970" href="http://www.supermicro.com/support/faqs/faq.cfm?faq=12970" target="_blank">here</a>. The other option is to put this card in another computer that does not have the UEFI BIOS and follow the process above. I of course will attempt to flash the card using the EFI boot solution.</p>
<p>For EFI boot. Get an EFI boot loader from <a title="http://www.msi.com/service/download/nbdriver-19781.html" href="http://www.msi.com/service/download/nbdriver-19781.html" target="_blank">here</a>. Extract this on your USB thumb drive.</p>
<p>Another thing you will want to do is get spacers if you have not already done so to get this card to mount into a standard PCIe slot as these cards are UIO form.</p>
<p>Here is what you need to get from Home Depot or other store.</p>
<ul>
<li>#4-40 x 3/8″ machine screws</li>
<li>1/4″ inch long nylon spacer (1/4″ x .140″)</li>
</ul>
<p>Here is a pic of the spacers. I actually flipped them around after taking this pic. :)</p>
<p><a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/03/2013-03-07-20.52.31.jpg"><img class="alignnone size-medium wp-image-1439" alt="2013-03-07 20.52.31" src="{{ site.baseurl }}/assets/2013-03-07-20.52.31-225x300.jpg" width="225" height="300" /></a></p>
<p><a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/03/2013-03-07-20.45.40.jpg"><img class="alignnone size-medium wp-image-1438" alt="2013-03-07 20.45.40" src="{{ site.baseurl }}/assets/2013-03-07-20.45.40-300x225.jpg" width="300" height="225" /></a> <a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/03/2013-03-07-20.45.34.jpg"><img class="alignnone size-medium wp-image-1437" alt="2013-03-07 20.45.34" src="{{ site.baseurl }}/assets/2013-03-07-20.45.34-300x225.jpg" width="300" height="225" /></a> <a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/03/2013-03-07-20.45.29.jpg"><img class="alignnone size-medium wp-image-1436" alt="2013-03-07 20.45.29" src="{{ site.baseurl }}/assets/2013-03-07-20.45.29-300x225.jpg" width="300" height="225" /></a> <a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/03/2013-03-07-20.45.20.jpg"><img class="alignnone size-medium wp-image-1435" alt="2013-03-07 20.45.20" src="{{ site.baseurl }}/assets/2013-03-07-20.45.20-225x300.jpg" width="225" height="300" /></a> <a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/03/2013-03-07-20.45.16.jpg"><img class="alignnone size-medium wp-image-1434" alt="2013-03-07 20.45.16" src="{{ site.baseurl }}/assets/2013-03-07-20.45.16-225x300.jpg" width="225" height="300" /></a></p>
<p>&nbsp;</p>
