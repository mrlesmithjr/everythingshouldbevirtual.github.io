---
layout: post
title: Zenoss 4.2.4 CentOS Install
date: 2013-07-14 11:56:04.000000000 -04:00
type: post
published: true
status: publish
categories:
- Monitoring
- Zenoss
tags:
- centos
- esxi
- Vsphere
- zenoss
meta:
  _edit_last: '11'
  _s2mail: 'yes'
  snapEdIT: '1'
  snapFB: s:300:"a:1:{i:0;a:8:{s:4:"doFB";s:1:"1";s:8:"PostType";s:1:"A";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:51:"New
    post (%TITLE%) has been published on %SITENAME%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:31:"389547404477041_445308832234231";s:5:"pDate";s:19:"2013-07-14
    15:56:07";}}";
  snapSU: s:213:"a:1:{i:0;a:7:{s:4:"doSU";s:1:"1";s:7:"apSUCat";s:2:"IT";s:10:"SNAPformat";s:16:"%TITLE%
    - %TEXT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:6:"1dc1Vw";s:5:"pDate";s:19:"2013-07-14
    15:56:16";}}";
  snapTW: 's:252:"a:1:{i:0;a:7:{s:4:"doTW";s:1:"1";s:10:"SNAPformat";s:42:"%TITLE%
    - %URL% #everythingshouldbevirtual";s:8:"attchImg";s:1:"0";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"356442030546751488";s:5:"pDate";s:19:"2013-07-14
    15:56:17";}}";'
  _wpas_done_all: '1'
  snap_isAutoPosted: '1'
  snapLI: s:187:"a:1:{i:0;a:5:{s:4:"doLI";s:1:"1";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"SNAPformatT";s:6:"&nbsp;";s:11:"isPrePosted";s:1:"1";}}";
  enclosure: "http://packages.vmware.com/tools/esx/5.1/repos/vmware-tools-repo-RHEL6-9.0.0-2.x86_64.rpm\r\n2534\r\napplication/wordperfect\r\n"
  _wp_rp_related_posts_query_result_cache_expiration: '1511894419'
  _wp_rp_related_posts_query_result_cache_6: a:12:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:4:"4708";s:5:"score";s:17:"89.02980738110443";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:4:"2242";s:5:"score";s:17:"74.34986362660638";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:4:"1494";s:5:"score";s:17:"63.07394710190158";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:4:"1630";s:5:"score";s:17:"59.98296043207747";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:3:"487";s:5:"score";s:18:"52.246393983477454";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"3826";s:5:"score";s:17:"50.24075153497151";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:3:"522";s:5:"score";s:17:"49.97368874985192";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:3:"481";s:5:"score";s:17:"49.97368874985192";}i:8;O:8:"stdClass":2:{s:7:"post_id";s:4:"1444";s:5:"score";s:16:"49.2653451221971";}i:9;O:8:"stdClass":2:{s:7:"post_id";s:4:"1402";s:5:"score";s:17:"46.58756087817367";}i:10;O:8:"stdClass":2:{s:7:"post_id";s:4:"1581";s:5:"score";s:16:"45.8847651042843";}i:11;O:8:"stdClass":2:{s:7:"post_id";s:4:"1282";s:5:"score";s:16:"45.8847651042843";}}
  _wp_rp_image: empty
  dsq_thread_id: '3346750499'
author:
  login: larry.e.smith.jr
  email: larry.e.smith.jr@gmail.com
  display_name: mrlesmithjr
  first_name: Larry
  last_name: Smith
---
<p>Wanted to throw this together for anyone else who may be looking everywhere on how to do this as well. I will be adding additional information as I come across information that might be useful. So this will be getting updated quite a bit I am sure.</p>
<p>First thing is to build your server to run Zenoss on. I will be using CentOS for mine.</p>
<p>Install CentOS x64 from DVD and select minimal install.</p>
<p>Once the installation is complete and you have rebooted do the following.</p>
<pre>yum update</pre>
<p>Install VMware Tools</p>
<pre>yum -y install http://packages.vmware.com/tools/esx/5.1/repos/vmware-tools-repo-RHEL6-9.0.0-2.x86_64.rpm
yum -y install vmware-tools-esx-nox</pre>
<p>Uninstall MySQL-Libs otherwise the auto script will fail and tell you to remove them anyways so go ahead and do it.</p>
<pre>yum -y remove mysql-libs</pre>
<p>Download Zenoss Auto-Install Script to install Zenoss</p>
<pre>wget --no-check-certificate https://github.com/zenoss/core-autodeploy/tarball/4.2.4 -O auto.tar.gz
tar xvf auto.tar.gz
cd zenoss-core-autodeploy-*
./core-autodeploy.sh</pre>
<p>During the auto install script it failed to resolve http://rpmforge.sw.be/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm so the script failed and stopped. In order to start again I had to run the following before running the script again.</p>
<pre>yum -y remove MySQL-*</pre>
<p>The auto install script will run all the way through and finally prompt asking if you want to secure the MySQL root account, select (Y/n) and then the script will continue on. Once the script finishes you will have a working instance of Zenoss. At this point you c an login to Zenoss from your browser by going to http://{ipdaddress|fqdn}:8080 and you will see the following.</p>
<p><a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-14-at-10.53.12-AM.png"><img class="alignnone size-medium wp-image-1821" alt="Screen Shot 2013-07-14 at 10.53.12 AM" src="{{ site.baseurl }}/assets/Screen-Shot-2013-07-14-at-10.53.12-AM-300x99.png" width="300" height="99" /></a></p>
<p>&nbsp;</p>
<p>Click Get Started</p>
<p><a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-14-at-10.59.51-AM.png"><img class="alignnone size-medium wp-image-1822" alt="Screen Shot 2013-07-14 at 10.59.51 AM" src="{{ site.baseurl }}/assets/Screen-Shot-2013-07-14-at-10.59.51-AM-300x92.png" width="300" height="92" /></a></p>
<p>&nbsp;</p>
<p>Enter IP address(s) or hostname(s) to start discovering devices manually or automatically.</p>
<p>&nbsp;</p>
<p><a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-14-at-11.03.35-AM.png"><img class="alignnone size-medium wp-image-1823" alt="Screen Shot 2013-07-14 at 11.03.35 AM" src="{{ site.baseurl }}/assets/Screen-Shot-2013-07-14-at-11.03.35-AM-300x110.png" width="300" height="110" /></a></p>
<p>&nbsp;</p>
<p><a href="http://everythingshouldbevirtual.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-14-at-11.06.51-AM.png"><img class="alignnone size-medium wp-image-1824" alt="Screen Shot 2013-07-14 at 11.06.51 AM" src="{{ site.baseurl }}/assets/Screen-Shot-2013-07-14-at-11.06.51-AM-300x138.png" width="300" height="138" /></a></p>
<p>&nbsp;</p>
<p>That is pretty much it for getting Zenoss up and running. So start adding some devices and have fun.</p>
<p>When adding Windows devices and would like to use WMI using a domain account enter the account in the format like <em>domain\account</em></p>
<p>Monitoring ESXi 5.1 hosts</p>
<p>Install the following packages first.</p>
<pre>yum -y install perl-CPAN make gcc openssl-devel perl-YAML libxml2-devel libuuid-devel glibc.i686 zlib.i686 ncurses-libs.i686 libstdc++.i686 libxml2.i686</pre>
<p>Download vSphere CLI from <a title="https://my.vmware.com/group/vmware/details?downloadGroup=VSP510-VCLI-51U1&amp;productId=327" href="https://my.vmware.com/group/vmware/details?downloadGroup=VSP510-VCLI-51U1&amp;productId=327" target="_blank">here </a>and transfer to your zenoss server.</p>
<p>You will need to export the following as is if you do not use a proxy server or add your proxy server ip/hostname and port after the = if you do. If you don't do this prior to running the install script it will fail and tell you to enter that information.</p>
<pre>export http_proxy=
export ftp_proxy=</pre>
<p>Extract the archive after transferring to your Zenoss server.</p>
<pre>tar xzvf VMware-vSphere-CLI-5.1.0-1060453.x86_64.gz</pre>
<p>Now run the install script.</p>
<pre>cd vmware-vsphere-cli-distrib
./vmware-install.pl
Creating a new vSphere CLI installer database using the tar4 format.

Installing vSphere CLI 5.1.0 build-1060453 for Linux.

You must read and accept the vSphere CLI End User License Agreement to
continue.
Press enter to display it.

VMware(r) Software Development Kit (SDK) License Agreement

......

Do you accept? (yes/no) yes

Thank you.

Please wait while configuring CPAN ...

Please wait while configuring perl modules using CPAN ...

CPAN is downloading and installing pre-requisite Perl module "Archive::Zip" .

CPAN is downloading and installing pre-requisite Perl module
"Class::MethodMaker" .

CPAN is downloading and installing pre-requisite Perl module "UUID" .

CPAN is downloading and installing pre-requisite Perl module "Data::Dump" .

CPAN is downloading and installing pre-requisite Perl module "SOAP::Lite" .

CPAN is downloading and installing pre-requisite Perl module "XML::SAX" .

CPAN is downloading and installing pre-requisite Perl module
"XML::NamespaceSupport" .

CPAN is downloading and installing pre-requisite Perl module
"XML::LibXML::Common" .

CPAN is downloading and installing pre-requisite Perl module "XML::LibXML" .

In which directory do you want to install the executable files?
[/usr/bin]

Please wait while copying vSphere CLI files...

The installation of vSphere CLI 5.1.0 build-1060453 for Linux completed
successfully. You can decide to remove this software from your system at any
time by invoking the following command:
"/usr/bin/vmware-uninstall-vSphere-CLI.pl".

This installer has successfully installed both vSphere CLI and the vSphere SDK
for Perl.

The following Perl modules were found on the system but may be too old to work
with vSphere CLI:

Compress::Zlib 2.037 or newer
Compress::Raw::Zlib 2.037 or newer
IO::Compress::Base 2.037 or newer
IO::Compress::Zlib::Constants 2.037 or newer
LWP::Protocol::https 5.805 or newer

Enjoy,

--the VMware team</pre>
<p>Enjoy!</p>
