---
layout: post
title: Ansible Playbook - GlusterFS - Apache
date: 2015-04-01 18:27:42.000000000 -04:00
type: post
published: true
status: publish
categories:
- Ansible
- Automation
tags:
- Ansible
meta:
  _wp_rp_image: empty
  _edit_last: '11'
  _snap_forceSURL: '2'
  snap_MYURL: ''
  snapEdIT: '1'
  snapFB: s:280:"a:1:{i:0;a:9:{s:4:"doFB";s:1:"1";s:8:"postType";s:1:"A";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:51:"New
    post (%TITLE%) has been published on %SITENAME%";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:11:"isPrePosted";s:1:"1";}}";
  snapLI: s:274:"a:1:{i:0;a:9:{s:4:"doLI";s:1:"1";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"SNAPformatT";s:1:" ";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:11:"isPrePosted";s:1:"1";}}";
  _s2mail: 'yes'
  _yoast_wpseo_focuskw: Ansible Playbook
  _yoast_wpseo_metadesc: Ansible Playbook - GlusterFS - Apache
  _yoast_wpseo_linkdex: '68'
  snap_isAutoPosted: '1'
  snapDL: s:242:"a:1:{i:0;a:7:{s:4:"doDL";s:1:"1";s:11:"SNAPformatT";s:7:"%TITLE%";s:10:"SNAPformat";s:9:"%EXCERPT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:32:"2999905a0a4df72705fa453a3aa9829e";s:5:"pDate";s:19:"2015-04-01
    22:27:42";}}";
  snapSU: s:304:"a:1:{i:0;a:9:{s:4:"doSU";s:1:"1";s:7:"apSUCat";s:2:"IT";s:4:"nsfw";s:1:"0";s:10:"SNAPformat";s:16:"%TITLE%
    - %TEXT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:6:"6T3nIC";s:7:"postURL";s:50:"http://www.stumbleupon.com/content/6T3nIC/comments";s:5:"pDate";s:19:"2015-04-01
    22:27:50";}}";
  _wp_rp_related_posts_query_result_cache_expiration: '1511895630'
  _wp_rp_related_posts_query_result_cache_6: a:12:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:4:"4934";s:5:"score";s:17:"64.62306023791845";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:4:"4695";s:5:"score";s:17:"63.57868147289813";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:4:"4915";s:5:"score";s:18:"62.781688595229845";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:4:"4449";s:5:"score";s:17:"61.94758314861696";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:4:"4962";s:5:"score";s:18:"59.237784393205416";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"4420";s:5:"score";s:17:"58.63597548285944";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:4:"5462";s:5:"score";s:18:"58.298075843306876";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:4:"4431";s:5:"score";s:17:"58.02181947717011";}i:8;O:8:"stdClass":2:{s:7:"post_id";s:4:"4367";s:5:"score";s:17:"57.31862493942141";}i:9;O:8:"stdClass":2:{s:7:"post_id";s:4:"5498";s:5:"score";s:17:"57.05050513699436";}i:10;O:8:"stdClass":2:{s:7:"post_id";s:4:"7702";s:5:"score";s:17:"56.56000014918199";}i:11;O:8:"stdClass":2:{s:7:"post_id";s:4:"4648";s:5:"score";s:17:"56.56000014918199";}}
  snapTW: 's:315:"a:1:{i:0;a:9:{s:4:"doTW";s:1:"1";s:10:"SNAPformat";s:59:"%TITLE%
    - %URL% #everythingshouldbevirtual #Ansible #DevOPS";s:8:"attchImg";s:1:"0";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"583395374112440320";s:5:"pDate";s:19:"2015-04-01
    22:27:50";}}";'
author:
  login: larry.e.smith.jr
  email: larry.e.smith.jr@gmail.com
  display_name: mrlesmithjr
  first_name: Larry
  last_name: Smith
---
<h4>Ansible - GlusterFS - Apache</h4>
<p>I wanted to share some of these playbooks for reference to others who may be attempting to do something similar. Overall I am setting up some Ubuntu servers which will be used for different functions (HAProxy load balancers, MariaDB, Apache and GlusterFS). HAProxy will be load balancing traffic back to the Apache servers and eventually MariaDB. There are separate servers which will be running as GlusterFS servers in which all of the Apache servers will be using a GlusterFS mount for their /var/www to keep all servers in sync. I will be piecing together more of this post as time goes on but for now I wanted to share the main parts for reference. Feel free to leave comments on anything else that might be of interest based on the information here.</p>
<p>Below is my site hosts inventory...(More on how this has been created in the future :) )</p>
<p>https://gist.github.com/mrlesmithjr/3ad75af9e60c96596c3e</p>
<p>Below is my site.yml file which includes some of the roles that I am installing. I can post more about the roles or put up on github for reference.</p>
<p>https://gist.github.com/mrlesmithjr/cfeec4122bdc9fb028d9</p>
<p>Below is the playbook for the configuration of lvm.</p>
<p>https://gist.github.com/mrlesmithjr/0859ffa8ec0e40a878b2</p>
<p>Below is the playbook for the initial GlusterFS setup.</p>
<p>https://gist.github.com/mrlesmithjr/e0954228a709785f92f1</p>
<p>And finally the actual GlusterFS playbook to do the actual configurations on the web servers and GlusterFS servers.</p>
<p>https://gist.github.com/mrlesmithjr/4669cac31c135c7840dc</p>
