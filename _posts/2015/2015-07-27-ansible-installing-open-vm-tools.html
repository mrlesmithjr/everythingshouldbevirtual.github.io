---
layout: post
title: Ansible - Installing open-vm-tools
date: 2015-07-27 21:19:31.000000000 -04:00
type: post
published: true
status: publish
categories:
- Ansible
- Automation
- Virtualization
- VMware
tags:
- Ansible
- VMware
meta:
  _edit_last: '7644'
  _snap_forceSURL: '2'
  snap_MYURL: ''
  snapEdIT: '1'
  snapFB: s:280:"a:1:{i:0;a:9:{s:4:"doFB";s:1:"1";s:8:"postType";s:1:"A";s:10:"AttachPost";s:1:"1";s:10:"SNAPformat";s:51:"New
    post (%TITLE%) has been published on %SITENAME%";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:11:"isPrePosted";s:1:"1";}}";
  snapLI: s:271:"a:1:{i:0;a:9:{s:4:"doLI";s:1:"1";s:8:"postType";s:1:"A";s:10:"SNAPformat";s:41:"New
    post has been published on %SITENAME%";s:11:"SNAPformatT";s:1:" ";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:11:"isPrePosted";s:1:"1";}}";
  _s2mail: 'yes'
  wp_github_commits_page_fields: a:3:{s:15:"gc_widget_title";s:0:"";s:11:"github_user";s:0:"";s:11:"github_repo";s:0:"";}
  _yoast_wpseo_focuskw: Ansible - Installing open-vm-tools
  _yoast_wpseo_metadesc: Ansible - Installing open-vm-tools
  _yoast_wpseo_linkdex: '56'
  snap_isAutoPosted: '1'
  snapDL: s:242:"a:1:{i:0;a:7:{s:4:"doDL";s:1:"1";s:11:"SNAPformatT";s:7:"%TITLE%";s:10:"SNAPformat";s:9:"%EXCERPT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:32:"eb28909cd00620b84cb3a1042bbe0fc6";s:5:"pDate";s:19:"2015-07-28
    01:19:32";}}";
  snapSU: s:304:"a:1:{i:0;a:9:{s:4:"doSU";s:1:"1";s:7:"apSUCat";s:2:"IT";s:4:"nsfw";s:1:"0";s:10:"SNAPformat";s:16:"%TITLE%
    - %TEXT%";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:6:"17Lwir";s:7:"postURL";s:50:"http://www.stumbleupon.com/content/17Lwir/comments";s:5:"pDate";s:19:"2015-07-28
    01:19:41";}}";
  _wp_rp_related_posts_query_result_cache_expiration: '1511360807'
  _wp_rp_related_posts_query_result_cache_6: a:12:{i:0;O:8:"stdClass":2:{s:7:"post_id";s:4:"4934";s:5:"score";s:17:"65.06202945873974";}i:1;O:8:"stdClass":2:{s:7:"post_id";s:4:"5498";s:5:"score";s:18:"62.751818296946624";}i:2;O:8:"stdClass":2:{s:7:"post_id";s:4:"4367";s:5:"score";s:17:"61.16240747726121";}i:3;O:8:"stdClass":2:{s:7:"post_id";s:4:"5383";s:5:"score";s:17:"60.34387268830774";}i:4;O:8:"stdClass":2:{s:7:"post_id";s:4:"4886";s:5:"score";s:18:"59.204982410375806";}i:5;O:8:"stdClass":2:{s:7:"post_id";s:4:"5734";s:5:"score";s:17:"58.75869530774739";}i:6;O:8:"stdClass":2:{s:7:"post_id";s:4:"7966";s:5:"score";s:17:"58.12776222997485";}i:7;O:8:"stdClass":2:{s:7:"post_id";s:4:"4708";s:5:"score";s:17:"54.46793975908351";}i:8;O:8:"stdClass":2:{s:7:"post_id";s:4:"4968";s:5:"score";s:17:"54.30737809730215";}i:9;O:8:"stdClass":2:{s:7:"post_id";s:4:"4386";s:5:"score";s:17:"53.91906606777738";}i:10;O:8:"stdClass":2:{s:7:"post_id";s:4:"4391";s:5:"score";s:17:"52.49086097675357";}i:11;O:8:"stdClass":2:{s:7:"post_id";s:4:"5901";s:5:"score";s:18:"51.616757621749024";}}
  snapTW: 's:335:"a:1:{i:0;a:9:{s:4:"doTW";s:1:"1";s:10:"SNAPformat";s:79:"%TITLE%
    - %URL% #everythingshouldbevirtual #VMware #ansible #DevOPs #automation";s:8:"attchImg";s:1:"0";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:11:"isPrePosted";s:1:"1";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"625838000979611649";s:5:"pDate";s:19:"2015-07-28
    01:19:41";}}";'
  _wp_rp_image: empty
author:
  login: mrlesmithjr
  email: mrlesmithjr@gmail.com
  display_name: Larry Smith Jr.
  first_name: ''
  last_name: ''
---
<p style="text-align: center;"><strong>Ansible - Installing open-vm-tools</strong></p>
<p style="text-align: left;">Just sharing this out in case someone else may be looking for a way to install open-vm-tools for Ubuntu or CentOS and wants to ensure that only virtual machines get this package installed.</p>
<p style="text-align: left;">Throw together a playbook or role and add the following bit of code and you are good to go.</p>
<pre>- name: debian | installing open-vm-tools
  apt: name=open-vm-tools state=present
  when: ansible_os_family == "Debian" and ansible_virtualization_type == "VMware"

- name: centos | installing open-vm-tools if a vm
  yum: name=open-vm-tools state=present
  when: ansible_os_family == "Redhat" and ansible_virtualization_type == "VMware"

- name: centos | starting and enabling open-vm-tools
  service: name=vmtoolsd.service state=restarted enabled=yes
  when: ansible_os_family == "Redhat" and ansible_virtualization_type == "VMware"
</pre>
<p>There you have it. Now when you run your playbook or roles open-vm-tools will be installed on only devices that are VMware virtual machines.</p>
<p>Enjoy!</p>
